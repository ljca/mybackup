ÿÿo"key"•00D40000000Ieox0DB1W000000bm0w0051W000004srMTen_US89724238-a24a-4a0a-8e82-ce533adbf268BLM15404137900000201033911344.0:markup://forceChatter:feedInner"itemo"value"Å°{"xs":"I","descriptor":"markup://forceChatter:feedInner","st":{"descriptor":"css://forceChatter.feedInner","co":".forceChatterFeedInner{min-width:250px}.forceChatterFeedInner .feedActions{padding:.75rem .75rem}.forceChatterFeedInner .forceSearchFilterHeader{max-width:784px;margin:0 auto;padding-left:1rem;padding-right:1rem}.forceChatterFeedInner .indicator{margin:0}.forceChatterFeedInner .forceChatterSearchInFeed{flex-grow:2}.forceChatterFeedInner .forceChatterSearchInFeed,.forceChatterFeedInner .cuf-filterMenu{margin-right:.5rem;margin-left:.5rem}.forceChatterFeedInner .searchInFeedInput.searchInFeedInput{padding-top:0;padding-bottom:0;height:2rem}.forceChatterFeedInner .cuf-element.highlighted{background-color:#ffa}.forceChatterFeedInner .cuf-element{transition:background-color 2s ease,opacity 1s ease}.forceChatterFeedInner .skip-feed-wrapper{position:relative}.forceChatterFeedInner .cuf-skipFeed{top:-1rem}.forceChatterFeedInner .skip-feed-endpoint{position:absolute;top:-1rem;right:0;height:1px;width:1px;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);clip:rect(1px, 1px, 1px, 1px);color:#3c3d3d;background:hsla(0, 0%, 100%, .98)}.forceChatterFeedInner .skip-feed-endpoint:focus{width:auto;height:auto;clip:auto;z-index:1000}.forceChatterFeedInner .skip-feed-wrapper .cuf-pinnedFeedItemHeader{padding:.75rem;border-bottom:2px solid rgba(19, 28, 29, 0.1);display:flex;font-weight:700;font-size:.8125rem;background-color:rgba(0, 135, 204, 0.05)}.forceChatterFeedInner .skip-feed-wrapper .cuf-pinnedFeedItemHeader span{display:inherit;vertical-align:bottom}.forceChatterFeedInner .skip-feed-wrapper .cuf-pinnedFeedItemHeader .cuf-pinnedIcon{padding-right:.75rem}.forceChatterFeedInner .feed-end{height:1px;width:1px}","cl":"forceChatterFeedInner"},"cd":{"descriptor":"compound://forceChatter.feedInner","ac":[{"n":"getSwitcherMenu","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$getSwitcherMenu","at":"SERVER","rt":"java://java.util.Map","pa":[{"name":"currentType","type":"java://java.lang.String"}]},{"n":"getActions","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$getActions","at":"SERVER","rt":"java://java.util.List","pa":[{"name":"recordId","type":"java://java.lang.String"},{"name":"entityApiName","type":"java://java.lang.String"},{"name":"context","type":"java://java.lang.String"},{"name":"listNameOrId","type":"java://java.lang.String"},{"name":"record","type":"java://java.util.Map<java.lang.String,java.lang.Object>"}]},{"n":"refreshFeed","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$refreshFeed","at":"SERVER","rt":"java://java.util.Map","pa":[{"name":"config","type":"java://ui.chatter.api.FeedConfig"},{"name":"pageSize","type":"java://java.lang.Integer"}]},{"n":"isFeedModified","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$isFeedModified","at":"SERVER","rt":"java://boolean","pa":[{"name":"config","type":"java://ui.chatter.api.FeedConfig"},{"name":"isModifiedToken","type":"java://java.lang.String"}]},{"n":"serverSortFeed","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$serverSortFeed","at":"SERVER","rt":"java://java.util.Map","pa":[{"name":"config","type":"java://ui.chatter.api.FeedConfig"},{"name":"pageSize","type":"java://java.lang.Integer"},{"name":"sortBy","type":"java://java.lang.String"}]},{"n":"getModel","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$getModel","at":"SERVER","rt":"java://ui.chatter.api.IFeedModel","pa":[{"name":"type","type":"java://java.lang.String"},{"name":"feedItemTypeAttribute","type":"java://sfdc.chatter.connect.api.enums.feeds.ConnectFeedItemTypeEnum"},{"name":"selectedFilter","type":"java://java.lang.String"},{"name":"density","type":"java://java.lang.String"},{"name":"subjectId","type":"java://java.lang.String"},{"name":"searchQuery","type":"java://java.lang.String"},{"name":"showFeedItemActions","type":"java://java.lang.Boolean"},{"name":"feedDesign","type":"java://java.lang.String"},{"name":"firstPageSize","type":"java://java.lang.Integer"},{"name":"nextPageSize","type":"java://java.lang.Integer"},{"name":"hasFeedSwitcher","type":"java://java.lang.Boolean"},{"name":"modelKey","type":"java://java.lang.String"},{"name":"showFilteringMenuGroup","type":"java://java.lang.Boolean"},{"name":"includeRecordActivitiesInFeed","type":"java://java.lang.Boolean"},{"name":"retrieveOnlyTopLevelThreadedComments","type":"java://boolean"}],"pce":true,"pcex":60},{"n":"serverCustomFilterFeed","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$serverCustomFilterFeed","at":"SERVER","rt":"java://java.util.Map","pa":[{"name":"config","type":"java://ui.chatter.api.FeedConfig"},{"name":"pageSize","type":"java://java.lang.Integer"},{"name":"filterName","type":"java://java.lang.String"}]},{"n":"serverSwitchFeedType","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$serverSwitchFeedType","at":"SERVER","rt":"java://java.util.Map","pa":[{"name":"config","type":"java://ui.chatter.api.FeedConfig"},{"name":"pageSize","type":"java://java.lang.Integer"},{"name":"feedType","type":"java://java.lang.String"}]},{"n":"markAsReadBatch","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$markAsReadBatch","at":"SERVER","rt":"java://java.util.Map","pa":[{"name":"feedItemIds","type":"java://java.util.List<java.lang.String>"},{"name":"isReadByMe","type":"java://boolean"},{"name":"communityId","type":"java://java.lang.String"}]},{"n":"serverFilterFeed","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$serverFilterFeed","at":"SERVER","rt":"java://java.util.Map","pa":[{"name":"config","type":"java://ui.chatter.api.FeedConfig"},{"name":"pageSize","type":"java://java.lang.Integer"},{"name":"filterBy","type":"java://java.lang.String"},{"name":"density","type":"java://java.lang.String"}]},{"n":"showMoreFeedItems","descriptor":"serviceComponent://ui.chatter.components.aura.components.forceChatter.chatter.FeedController/ACTION$showMoreFeedItems","at":"SERVER","rt":"java://java.util.Map","pa":[{"name":"config","type":"java://ui.chatter.api.FeedConfig"},{"name":"pagingToken","type":"java://java.lang.String"},{"name":"pageSize","type":"java://java.lang.Integer"}],"pce":true,"pcex":60}]},"ad":[["body","aura://Aura.Component[]","G",false,[]],["feedDesign","aura://String","I",false,"BROWSE"],["prefetchData","aura://Map","p",false,null],["config","java://ui.chatter.api.FeedConfig","I",false,null],["feedElementCollection","java://sfdc.chatter.connect.api.output.feeds.FeedElementCollectionRepresentation","I",true,null],["pinnedFeedElementCollection","aura://Object","I",false,null],["feedType","aura://String","I",false],["feedWidth","aura://String","I",false],["emptyFeedMessage","aura://Object","I",false,null],["firstPageSize","aura://Integer","I",false],["nextPageSize","aura://Integer","I",true],["pageSizeGetter","aura://Object","I",false,null],["hasFeedSwitcher","aura://Boolean","I",true],["feedSwitcherMenuData","java://ui.chatter.api.FeedSwitcherMenuData","I",false,null],["canChangeSorting","aura://Boolean","I",true],["canCommentsRequestReplies","aura://Boolean","I",false,false],["sortingMenuGroup","java://ui.chatter.api.FeedMenuGroup","I",false,null],["filteringMenuGroup","java://ui.chatter.api.FeedMenuGroup","I",false,null],["_densitySupported","aura://Boolean","I",false],["requireScroller","aura://Boolean","I",false,false],["hasRefreshButtonOnMobile","aura://Boolean","I",false,false],["hasNewContentPolling","aura://Boolean","I",false,false],["isFeedModified","aura://Boolean","I",false],["isFeedRefreshing","aura://Boolean","I",false],["searchQuery","aura://String","I",false],["hasFeedSearch","aura://Boolean","I",false,true],["_canShowMore","aura://Boolean","I",false],["enableLoadMoreButton","aura://Boolean","I",false,false],["enableInfiniteScroll","aura://Boolean","I",false,false],["showFeedItemActions","aura://Boolean","I",false,true],["commentActions","aura://List","I",false,[]],["onRefreshStart","aura://Aura.Action","I",false,null],["_isSorterLoaded","aura://Boolean","I",false,false],["sharedId","aura://String","I",false],["numQueuedItems","aura://Integer","I",false,0],["realtimeRefreshRequired","aura://Boolean","I",false,false],["feedItemOverrides","aura://Object","I",false,null],["preservedSortOrder","aura://String","I",false],["previousFeedItemIds","aura://String","I",false,""],["allSearchQueryIds","aura://String[]","I",false,[]],["fireShowMoreEvent","aura://Aura.Action","I",false,null],["hasPinnedFeedItems","aura://Boolean","I",false],["_showPinnedPostsHeader","aura://Boolean","I",false,false],["onLoadMoreStrategy","aura://String","I",false,"DEFAULT"]],"med":[{"name":"forceChatter:switchFeed","xs":"I","action":"{!c.switchFeed}","attributes":[["type","aura://String","I",false,"News"],["subjectId","aura://String","I",false,""]]},{"name":"forceChatter:sort","xs":"I","action":"{!c.sortMethod}","attributes":[["sortBy","aura://String","I",false],["callback","apex://Function","I",false,null]]},{"name":"forceChatter:searchMethod","xs":"I","action":"{!c.searchMethod}","attributes":[["searchQuery","aura://String","I",false]]},{"name":"forceChatter:cancelSearchMethod","xs":"I","action":"{!c.cancelSearchMethod}","attributes":[["callback","aura://String","I",false]]},{"name":"forceChatter:getFeedElements","xs":"I","action":"{!c.getFeedElements}","attributes":[["callback","apex://Function","I",false,null]]},{"name":"forceChatter:fetchAndFireSetLinkMetadataEvent","xs":"I","action":"{!c.fetchAndFireSetLinkMetadataEvent}","attributes":[["feedElements","aura://Map","I",false,null]]},{"name":"forceChatter:filterByCustomFilter","xs":"I","action":"{!c.filterByCustomFilter}","attributes":[["filterName","aura://String","I",false]]},{"name":"forceChatter:refreshComponent","xs":"I","action":"{!c.refresh}"}],"i":["markup://forceChatter:respectFeedDesign","markup://forceChatter:hasFeedPrefetchSupport"],"re":[{"ed":"markup://ui:load","n":"feedRendered","xs":"I"},{"ed":"markup://ui:refresh","n":"search","xs":"I"},{"ed":"markup://ui:dataChanged","n":"feedReloaded","xs":"I"},{"ed":"markup://forceChatter:setLinkMetadata","n":"metadataEvent","xs":"I"},{"ed":"markup://ui:noMoreContent","n":"noMoreContent","xs":"I"},{"ed":"markup://ui:showMore","n":"showMore","xs":"I"},{"ed":"markup://ui:refresh","n":"refresh","xs":"I"},{"ed":"markup://forceChatter:feedNotification","n":"feedNotification","xs":"I"},{"ed":"markup://ui:dataChanged","n":"feedRefreshed","xs":"I"}],"hd":[{"x":{"exprType":"PROPERTY","byValue":false,"path":"c.init"},"v":{"exprType":"PROPERTY","byValue":false,"path":"this"},"n":"init"},{"x":{"exprType":"PROPERTY","byValue":false,"path":"c.refresh"},"n":"refresh"},{"x":{"exprType":"PROPERTY","byValue":false,"path":"c.showMore"},"n":"showMore"},{"x":{"exprType":"PROPERTY","byValue":false,"path":"c.updateCanShowMore"},"v":{"exprType":"PROPERTY","byValue":false,"path":"v.feedElementCollection.nextPageToken"},"n":"change"},{"x":{"exprType":"PROPERTY","byValue":false,"path":"c.search"},"n":"search"},{"ed":{"descriptor":"markup://forceChatter:feedUpdated","t":"APPLICATION","xs":"I","a":{"event":["event","aura://Object","I",false,null]}},"x":{"exprType":"PROPERTY","byValue":false,"path":"c.handleDelegatedEvent"}},{"ed":{"descriptor":"markup://force:skipToContent","t":"APPLICATION","xs":"I","a":{"target":["target","aura://String","I",false]}},"x":{"exprType":"PROPERTY","byValue":false,"path":"c.skipPastFeed"},"ph":"bubble"},{"ed":{"descriptor":"markup://forceChatter:recordsHomeMobileScroll","t":"APPLICATION","xs":"I"},"x":{"exprType":"PROPERTY","byValue":false,"path":"c.markAsReadOnScroll"}},{"ed":{"descriptor":"markup://forceChatter:pinStatusUpdated","t":"APPLICATION","xs":"I","a":{"feedItem":["feedItem","aura://Object","I",false,null],"pinned":["pinned","aura://Boolean","I",false]}},"x":{"exprType":"PROPERTY","byValue":false,"path":"c.handlePinnedFeedItem"}},{"ed":{"descriptor":"markup://forceChatter:closeStatusUpdated","t":"APPLICATION","xs":"I","a":{"feedItem":["feedItem","aura://Object","I",false,null],"isClosed":["isClosed","aura://Boolean","I",false]}},"x":{"exprType":"PROPERTY","byValue":false,"path":"c.handleCloseStatusUpdated"}}],"ld":{"feedSorter":{"alias":"feed-sorter"},"feedFilterer":{"alias":"feed-filter"}},"fa":[{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://forceChatter:richLinkPreviewMetadata"},"localId":"richLinkPreviewMetadata"},{"componentDef":{"descriptor":"markup://aura:html"},"flavorable":true,"attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":{"exprType":"FUNCTION","code":"function(cmp,fn){return (fn.eq($A.get(\"$Site\"),null)?\"slds-card-wrapper\":\"\");}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Site"}],"byValue":false}}},"tag":{"descriptor":"tag","value":"div"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://forceChatter:scroller"},"localId":"scroller","attributes":{"values":{"enableInfiniteScroll":{"descriptor":"enableInfiniteScroll","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.enableInfiniteScroll"}},"onRefresh":{"descriptor":"onRefresh","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.refresh"}},"enableLoadMoreButton":{"descriptor":"enableLoadMoreButton","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.enableLoadMoreButton"}},"enabled":{"descriptor":"enabled","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.requireScroller"}},"extendedPullContent":{"descriptor":"extendedPullContent","value":[{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (cmp.get(\"v.hasFeedSearch\")&&!($A.get(\"$Browser.isDesktop\")));}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Browser.isDesktop"},{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.hasFeedSearch"}],"byValue":false}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://force:searchFilterHeader"},"localId":"findInFeed","attributes":{"values":{"class":{"descriptor":"class","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return fn.add(\"overrideScrollerChildStyle \",(fn.ne($A.get(\"$Site\"),null)?\"site-search-feed\":\"\"));}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Site"}],"byValue":false}},"searchQuery":{"descriptor":"searchQuery","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.searchQuery"}},"searchInputPlaceholder":{"descriptor":"searchInputPlaceholder","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Label.FeedSearch.searchPosts"}},"onCancel":{"descriptor":"onCancel","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.cancelSearch"}},"onSearch":{"descriptor":"onSearch","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.search"}}}}}]}}}}]},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return ($A.get(\"$Browser.isDesktop\")&&cmp.get(\"v.canChangeSorting\"));}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Browser.isDesktop"},{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.canChangeSorting"}],"byValue":false}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:html"},"attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":"feedActions slds-grid slds-grid_vertical-align-end slds-grid_align-spread slds-p-around_small qe-feedPanelFeedActions"}},"tag":{"descriptor":"tag","value":"div"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.canChangeSorting"}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://feeds_sorter:sorter","type":"module"},"localId":"feedSorter","attributes":{"values":{"sortOptions":{"descriptor":"sortOptions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.sortingMenuGroup"}},"sortOrder":{"descriptor":"sortOrder","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.sortOrder"}},"triggerType":{"descriptor":"triggerType","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (fn.eq(cmp.get(\"v.feedWidth\"),\"SMALL\")?\"BUTTON\":\"COMBOBOX\");}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedWidth"}],"byValue":false}}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:html"},"attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":"right-actions slds-grid slds-grid_align-end slds-grow"}},"tag":{"descriptor":"tag","value":"div"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.hasFeedSearch"}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://forceChatter:searchInFeed"},"localId":"findInFeed","attributes":{"values":{"cancelSearchEvt":{"descriptor":"cancelSearchEvt","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.cancelSearch"}},"searchEvt":{"descriptor":"searchEvt","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.search"}}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return ((cmp.get(\"v.filteringMenuGroup.menuOptions.length\")>1)||cmp.get(\"v._densitySupported\"));}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.filteringMenuGroup.menuOptions.length"},{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v._densitySupported"}],"byValue":false}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://feeds_sorter:filter","type":"module"},"localId":"feedFilterer","attributes":{"values":{"class":{"descriptor":"class","value":"slds-m-right_x-small"},"density":{"descriptor":"density","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.density"}},"isDensityFilter":{"descriptor":"isDensityFilter","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v._densitySupported"}},"menuAlignment":{"descriptor":"menuAlignment","value":"right"},"filterOptions":{"descriptor":"filterOptions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.filteringMenuGroup"}},"feedFilter":{"descriptor":"feedFilter","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.feedFilter"}}}}}]}}}},{"componentDef":{"descriptor":"markup://lightning:buttonIcon"},"attributes":{"values":{"size":{"descriptor":"size","value":"medium"},"class":{"descriptor":"class","value":"cuf-refresh"},"iconName":{"descriptor":"iconName","value":"utility:refresh"},"alternativeText":{"descriptor":"alternativeText","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Label.Feeds.FeedRefresh"}},"onclick":{"descriptor":"onclick","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.refreshClicked"}}}}}]}}}}]}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (!($A.get(\"$Browser.isDesktop\"))&&fn.eq($A.get(\"$Site\"),null));}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Browser.isDesktop"},{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Site"}],"byValue":false}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:html"},"attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":"slds-grid slds-grid_align-spread slds-grid_vertical-align-center"}},"tag":{"descriptor":"tag","value":"div"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.hasFeedSwitcher"}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://forceChatter:feedSwitcher"},"attributes":{"values":{"currentTypeLabel":{"descriptor":"currentTypeLabel","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedSwitcherMenuData.currentFeedTypeLabel"}},"typeList":{"descriptor":"typeList","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedSwitcherMenuData.feedsTypeList"}},"currentType":{"descriptor":"currentType","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedSwitcherMenuData.currentFeedType"}},"contextId":{"descriptor":"contextId","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (cmp.get(\"v.sharedId\")?cmp.get(\"v.sharedId\"):cmp.get(\"globalId\"));}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"globalId"},{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.sharedId"}],"byValue":false}}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:html"},"attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":"slds-grid slds-grid_align-spread slds-m-right_small"}},"tag":{"descriptor":"tag","value":"div"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.canChangeSorting"}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://feeds_sorter:sorter","type":"module"},"localId":"feedSorter","attributes":{"values":{"sortOptions":{"descriptor":"sortOptions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.sortingMenuGroup"}},"sortOrder":{"descriptor":"sortOrder","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.sortOrder"}},"triggerType":{"descriptor":"triggerType","value":"BUTTON"},"menuAlignment":{"descriptor":"menuAlignment","value":"right"}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (cmp.get(\"v.filteringMenuGroup.menuOptions.length\")>1);}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.filteringMenuGroup.menuOptions.length"}],"byValue":false}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://feeds_sorter:filter","type":"module"},"localId":"feedFilterer","attributes":{"values":{"density":{"descriptor":"density","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.density"}},"isDensityFilter":{"descriptor":"isDensityFilter","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v._densitySupported"}},"menuAlignment":{"descriptor":"menuAlignment","value":"right"},"filterOptions":{"descriptor":"filterOptions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.filteringMenuGroup"}},"feedFilter":{"descriptor":"feedFilter","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.feedFilter"}}}}}]}}}}]}}}}]}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (!($A.get(\"$Browser.isDesktop\"))&&fn.ne($A.get(\"$Site\"),null));}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Browser.isDesktop"},{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Site"}],"byValue":false}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:html"},"attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":"slds-grid slds-grid_align-spread slds-grid_vertical-align-center slds-m-bottom_x-small sort-filter-header"}},"tag":{"descriptor":"tag","value":"div"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.canChangeSorting"}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://feeds_sorter:sorter","type":"module"},"localId":"feedSorter","attributes":{"values":{"sortOptions":{"descriptor":"sortOptions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.sortingMenuGroup"}},"sortOrder":{"descriptor":"sortOrder","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.sortOrder"}},"triggerType":{"descriptor":"triggerType","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (fn.eq($A.get(\"$Browser.formFactor\"),\"TABLET\")?\"COMBOBOX\":\"BUTTON\");}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Browser.formFactor"}],"byValue":false}},"menuAlignment":{"descriptor":"menuAlignment","value":"left"}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:html"},"attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":"slds-grid slds-grid_align-spread"}},"tag":{"descriptor":"tag","value":"div"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (cmp.get(\"v.filteringMenuGroup.menuOptions.length\")>1);}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.filteringMenuGroup.menuOptions.length"}],"byValue":false}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://feeds_sorter:filter","type":"module"},"localId":"feedFilterer","attributes":{"values":{"class":{"descriptor":"class","value":"slds-m-right_x-small"},"density":{"descriptor":"density","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.density"}},"isDensityFilter":{"descriptor":"isDensityFilter","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v._densitySupported"}},"menuAlignment":{"descriptor":"menuAlignment","value":"right"},"filterOptions":{"descriptor":"filterOptions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.filteringMenuGroup"}},"feedFilter":{"descriptor":"feedFilter","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.feedFilter"}}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.hasRefreshButtonOnMobile"}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://lightning:buttonIcon"},"attributes":{"values":{"size":{"descriptor":"size","value":"medium"},"class":{"descriptor":"class","value":"cuf-refresh"},"iconName":{"descriptor":"iconName","value":"utility:refresh"},"alternativeText":{"descriptor":"alternativeText","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Label.Feeds.FeedRefresh"}},"onclick":{"descriptor":"onclick","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.refreshClicked"}}}}}]}}}}]}}}}]}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:html"},"attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":"skip-feed-wrapper"}},"tag":{"descriptor":"tag","value":"div"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://force:skipLink"},"attributes":{"values":{"class":{"descriptor":"class","value":"slds-assistive-text slds-assistive-text--focus cuf-skipFeed"},"target":{"descriptor":"target","value":"endOfFeed"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:expression"},"attributes":{"values":{"value":{"descriptor":"value","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Label.Feeds.SkipPastTheFeedOnTabbingLink"}}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:if"},"attributes":{"values":{"isTrue":{"descriptor":"isTrue","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.hasPinnedFeedItems"}},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://forceChatter:feedElementIteration"},"localId":"cuf-pinnedFeed","attributes":{"values":{"isInPrivateGroup":{"descriptor":"isInPrivateGroup","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.isPrivateGroup"}},"feedItemOverrides":{"descriptor":"feedItemOverrides","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedItemOverrides"}},"isPinnedPostFeed":{"descriptor":"isPinnedPostFeed","value":true},"emptyFeedMessage":{"descriptor":"emptyFeedMessage","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.emptyFeedMessage"}},"isTopicsEnabled":{"descriptor":"isTopicsEnabled","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.isTopicsEnabled"}},"config":{"descriptor":"config","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config"}},"elements":{"descriptor":"elements","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.pinnedFeedElementCollection.elements"}},"feedDesign":{"descriptor":"feedDesign","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedDesign"}},"showFeedItemActions":{"descriptor":"showFeedItemActions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.showFeedItemActions"}},"commentActions":{"descriptor":"commentActions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.commentActions"}},"subjectId":{"descriptor":"subjectId","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.subjectId"}},"feedType":{"descriptor":"feedType","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedType"}}}}}]}}}},{"componentDef":{"descriptor":"markup://forceChatter:feedElementIteration"},"localId":"cuf-feed","attributes":{"values":{"isInPrivateGroup":{"descriptor":"isInPrivateGroup","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.isPrivateGroup"}},"feedItemOverrides":{"descriptor":"feedItemOverrides","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedItemOverrides"}},"elements":{"descriptor":"elements","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedElementCollection.elements"}},"commentActions":{"descriptor":"commentActions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.commentActions"}},"subjectId":{"descriptor":"subjectId","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.subjectId"}},"isPinnedPostFeed":{"descriptor":"isPinnedPostFeed","value":false},"emptyFeedMessage":{"descriptor":"emptyFeedMessage","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.emptyFeedMessage"}},"isTopicsEnabled":{"descriptor":"isTopicsEnabled","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.isTopicsEnabled"}},"config":{"descriptor":"config","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config"}},"feedDesign":{"descriptor":"feedDesign","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedDesign"}},"canCommentsRequestReplies":{"descriptor":"canCommentsRequestReplies","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.canCommentsRequestReplies"}},"showFeedItemActions":{"descriptor":"showFeedItemActions","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.showFeedItemActions"}},"feedType":{"descriptor":"feedType","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedType"}}}}},{"componentDef":{"descriptor":"markup://aura:html"},"localId":"endOfFeed","attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":"skip-feed-endpoint","onfocus":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.handleEndOfFeedFocused"},"tabindex":"-1"}},"tag":{"descriptor":"tag","value":"div"},"body":{"descriptor":"body","value":[{"componentDef":{"descriptor":"markup://aura:expression"},"attributes":{"values":{"value":{"descriptor":"value","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"$Label.Feeds.EndOfFeedMarker"}}}}}]}}}}]}}}},{"componentDef":{"descriptor":"markup://aura:html"},"localId":"feedEnd","attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":"feed-end"}},"tag":{"descriptor":"tag","value":"div"}}}},{"componentDef":{"descriptor":"markup://aura:html"},"localId":"feedPlaceholder","attributes":{"values":{"HTMLAttributes":{"descriptor":"HTMLAttributes","value":{"class":{"exprType":"FUNCTION","code":"function(cmp,fn){return fn.add((cmp.get(\"v.isFeedRefreshing\")?\"\":\"invisibleEl\"),\" placeholder\");}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.isFeedRefreshing"}],"byValue":false}}},"tag":{"descriptor":"tag","value":"div"}}}}]},"header":{"descriptor":"header","value":[{"componentDef":{"descriptor":"markup://forceChatter:newContent"},"localId":"newContent","attributes":{"values":{"checkNewContent":{"descriptor":"checkNewContent","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.checkNewContent"}},"isVisible":{"descriptor":"isVisible","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (cmp.get(\"v.isFeedModified\")>\"\");}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.isFeedModified"}],"byValue":false}},"onPress":{"descriptor":"onPress","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.refreshAndScrollToTop"}},"isEnabled":{"descriptor":"isEnabled","value":{"exprType":"FUNCTION","code":"function(cmp,fn){return (((cmp.get(\"v.hasNewContentPolling\")&&(cmp.get(\"v.feedElementCollection.isModifiedToken\")>\"\"))&&!(cmp.get(\"v.isFeedRefreshing\")))&&!((cmp.get(\"v.config.searchQuery\")>\"\")));}","args":[{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.isFeedRefreshing"},{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.hasNewContentPolling"},{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.feedElementCollection.isModifiedToken"},{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.config.searchQuery"}],"byValue":false}}}}}]},"onShowMore":{"descriptor":"onShowMore","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c.showMore"}},"onScrollMove":{"descriptor":"onScrollMove","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"c._handleForceChatterScrollMove"}},"canShowMore":{"descriptor":"canShowMore","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v._canShowMore"}},"onLoadMoreStrategy":{"descriptor":"onLoadMoreStrategy","value":{"exprType":"PROPERTY","byValue":false,"target":"forceChatter:feedInner","path":"v.onLoadMoreStrategy"}}}}}]}}}}]}],"fc":true,"cc":"$A.componentService.addComponentClass(\"markup://forceChatter:feedInner\",function(){return{meta:{name:\"forceChatter$feedInner\",\"extends\":\"markup://aura:component\",imports:{feedLib:\"markup://forceChatter:feedLib\",methodEmitter:\"markup://forceChatter:methodEmitterService\",prefetcherLib:\"markup://forceChatter:feedPrefetcherLib\",realtime:\"markup://forceChatter:streamingDataService\",metricsReporter:\"markup://forceChatter:metricsReportingService\",cmpLib:\"markup://force:componentLibrary\",storage:\"markup://forceChatter:storage\",\neventBroker:\"markup://one:s1EventBroker\",sfdc:\"markup://force:sfdcLibrary\",pageLoadCoordination:\"markup://forceChatter:pageLoadCoordinationService\"}},controller:{init:function(a,b,c){a._context={};b=a.get(\"v.feedElementCollection.nextPageToken\");a.set(\"v._canShowMore\",\"\"<b);var d=c.getContext(a);d.unreadItems=null;d.logRerender=!1;d.scrollEmitter=c._createSingleEventEmitter();d.interceptedScrollCallback=null;d.isLoading=null;d.isPreloading=null;if(a.get(\"v.config.isFeedReadTrackingEnabled\")){b=!0;\nc.feedLib.util.isPSSC()&&($A.get(\"$Site.isGuestUser\")?b=!1:(d.windowScrollListener=$A.getCallback(function(a){d.scrollEmitter.notify()}),window.addEventListener(\"scroll\",d.windowScrollListener,{passive:!0})));if(b){var e=a.get(\"c.markAsReadOnScrollWithDebounce\");d.scrollEmitter.addListener($A.getCallback(function(){e.run()}))}c.markAsRead(a,null,c)}c.findUnreadItemIds(a,c,a.get(\"v.feedElementCollection.elements\"));a.get(\"v._canShowMore\")||a.getEvent(\"noMoreContent\").fire();(b=a.get(\"v.sharedId\"))||\n(b=a.getGlobalId());c.methodEmitter.service.on(\"switchFeedType\",a,\"switchFeed\",b);b=c._getPageSize.bind(c,a);var f=c._getPageCount.bind(c,a);c.prefetcherLib.prefetcher.resetAndConfigurePrefetcher(a,a.get(\"v.feedElementCollection.nextPageToken\"),b,f);if(b=a.get(\"v.config\"))c.realtime.service.init(b.isRealtimeEnabled,b.isRealtimeDiagnosticsEnabled,b.streamingApiSessionKey,b.cometdUrl),c.realtime.service.initAppSwitcherWatcher(a),c.realtimeSubscribe(a);b=(b=a.get(\"v.feedType\"))&&b.toLowerCase();!c.feedLib.util.isPSSC()&&\n(\"news\"===b||\"streams\"===b)&&a.set(\"v._densitySupported\",!0);c=a.get(\"v.pinnedFeedElementCollection.elements\");$A.util.isEmpty(c)||(c.forEach(function(a){a.capabilities.pin.isPinnedCopy=!0}),a.set(\"v.hasPinnedFeedItems\",!0))},updateQueuedItems:function(a,b,c){if(a&&a.isValid()){b=a.get(\"v.realtimeRefreshRequired\");var d=c.getContext(a),e=a.getGlobalId(),f=c.realtime.service.popQueuedItems(e);a.set(\"v.numQueuedItems\",c.realtime.service.getQueueLength(e));a.set(\"v.realtimeRefreshRequired\",!1);b?c.refreshFeed(a):\n(c.insertFeedItems(a,f,!0),c.findUnreadItemIds(a,a.helper,f),window.setTimeout($A.getCallback(function(){d.unreadItems&&d.unreadItems.length&&a.helper.markAsRead(a,null,a.helper)}),0));c.scrollTo(a,\"top\");a.getEvent(\"feedNotification\").setParams({type:\"HIDE\"}).fire();c=a.get(\"v.config\");b={queuedItems:f.length,refreshRequired:b,feedType:c.type,sortOrder:c.sortOrder};c.subjectId&&(b.subjectId=\"005\"===c.subjectId.substring(0,3)?\"user\":c.subjectId);$A.metricsService.transaction(\"ltng\",\"interaction\",\n{context:{eventSource:\"synthetic-click\",eventType:\"user\",locator:{target:\"\",scope:\"ChatterFeed-LivePostsPill\"},attributes:b}})}},showMore:function(a,b,c){c.loadMore(a,null,b);(a=a.get(\"v.fireShowMoreEvent\"))&&a.run()},handleDelegatedEvent:function(a,b,c){b=b.getParam(\"event\");$A.assert($A.util.isObject(b),\"The wrapped event must be an object\");c.handleEvent(a,b)},switchFeed:function(a,b,c){b=b.getParam(\"arguments\");c.switchFeedType(a,b)},sort:function(a,b,c){(b=b.getParam(\"parameters\"))&&b.sortBy&&\nc.sort(a,b.sortBy)},filter:function(a,b,c){b=b.getParam(\"parameters\")||{};c.filter(a,b.filterBy,b.density)},filterByCustomFilter:function(a,b,c){b=b.getParam(\"arguments\")||{};c.filterByCustomFilter(a,b.filterName)},refresh:function(a,b,c){c.refreshFeed(a,b)},refreshClicked:function(a){a.helper.refreshFeed(a)},refreshAndScrollToTop:function(a,b,c){c.refreshFeed(a,function(){c.scrollTo(a,\"top\")})},checkNewContent:function(a,b,c){c.checkNewContent(a,b,c)},cancelSearch:function(a,b,c){a.get(\"v.searchQuery\");\nvar d=a.get(\"v.config\");a.set(\"v.searchQuery\",null);d.searchQuery&&(d.searchQuery=null,c.updateConfig(a,d),c.refreshFeed(a));(a=b&&b.getParam(\"callback\"))&&a()},search:function(a,b,c){var d;a.find(\"findInFeed\")?(d=a.find(\"findInFeed\").get(\"v.searchQuery\"),a.set(\"v.searchQuery\",d)):d=a.get(\"v.searchQuery\");d&&d.trim&&(d=d.trim());if(\"\"<d){c.log({itemToLog:\"feedSearch\"});var e=a.get(\"v.config\");e.searchQuery=d;c.updateConfig(a,e);b=b&&b.getParam(\"parameters\")||{};c.metricsReporter.service.transactionStart(\"feeds\",\n\"feedRerendered\",{context:{operation:\"search\"}});c.refreshFeed(a,b.callback)}},searchMethod:function(a,b,c){b=b.getParam(\"arguments\");$A.util.lookup(b,\"searchQuery\")&&c.search(a,b.searchQuery)},cancelSearchMethod:function(a,b,c){b=b.getParam(\"arguments\");c.cancelSearch(a,b.callback)},sortMethod:function(a,b,c){b=b.getParam(\"arguments\");$A.util.lookup(b,\"sortBy\")&&c.sort(a,b.sortBy,b.callback)},fetchAndFireSetLinkMetadataEvent:function(a,b,c){b=b.getParam(\"arguments\");$A.util.lookup(b,\"feedElements\")&&\nc.fetchAndFireSetLinkMetadataEvent(a,b.feedElements)},updateCanShowMore:function(a,b,c){b=a.get(\"v.feedElementCollection.nextPageToken\");a.set(\"v._canShowMore\",\"\"<b)},swapAndOpenSorter:function(a,b){if(!b||!b.keyCode||!(13!==b.keyCode&&32!==b.keyCode&&(37>b.keyCode||40<b.keyCode))){a.set(\"v._isSorterLoaded\",!0);var c=a.find(\"feedSorter\");c&&c.setFocus()}},skipPastFeed:function(a,b,c){if(\"endOfFeed\"===b.getParam(\"target\")&&(a&&a.isValid())&&(a=a.find(\"endOfFeed\")))(a=a.getElement())&&a.focus();b.stopPropagation()},\n_handleForceChatterScrollMove:function(a,b,c){c.getContext(a).scrollEmitter.notify()},markAsReadOnScrollWithDebounce:function(a,b,c){var d=c.getContext(a);d.markAsReadCountdown&&clearTimeout(d.markAsReadCountdown);d.markAsReadCountdown=setTimeout($A.getCallback(function(){d.unreadItems&&d.unreadItems.length&&c.markAsRead(a,b,c)}),500)},markAsReadOnScroll:function(a,b,c){if(a.get(\"v.config.isFeedReadTrackingEnabled\")){var d=c.getContext(a);d.unreadItems&&d.unreadItems.length&&c.markAsRead(a,b,c)}},\ngetFeedElements:function(a,b,c){(a=a.find(\"cuf-feed\"))&&a.getFeedElements(b.getParam(\"arguments\").callback)},handlePinnedFeedItem:function(a,b,c){var d=b.getParam(\"pinned\");b=b.getParam(\"feedItem\");d?(d={},$A.util.apply(d,b,!0,!0),d.capabilities.pin.isPinnedCopy=!0,d.capabilities.pin.isPinned=!0,d.refocus=!1,a.set(\"v._showPinnedPostsHeader\",!0),b=$A.util.lookup(a.get(\"v.pinnedFeedElementCollection\"),\"elements\"),$A.util.isArray(b)?(b.push(d),a.set(\"v.pinnedFeedElementCollection.elements\",b)):(b=[d],\na.set(\"v.pinnedFeedElementCollection\",{elements:b})),a.set(\"v.hasPinnedFeedItems\",!0),c.fetchAndFireSetLinkMetadataEvent(a,b)):(a.set(\"v._showPinnedPostsHeader\",!1),c.refreshFeed(a,$A.getCallback(function(){c.scrollTo(a,\"top\")})))},handleCloseStatusUpdated:function(a,b,c){b=b.getParam(\"feedItem\");var d=b.id,e=$A.util.lookup(a.get(\"v.feedElementCollection\"),\"elements\");if($A.util.isArray(e)){var f=e.filter(function(a){return a.id===d});if(0===f.length)return;f=e.indexOf(f[0]);-1<f&&(e[f]=b,a.set(\"v.feedElementCollection.elements\",\ne))}c.fetchAndFireSetLinkMetadataEvent(a,e)},handleEndOfFeedFocused:function(a){a.set(\"v.enableInfiniteScroll\",!1);a.set(\"v.enableLoadMoreButton\",!0)}},helper:{constants:{PREFETCHED_PAGES:3},_getPageCount:function(a,b,c){$A.log(\"FeedInner.helper#getPageCount - eventName:\"+b+\"; pageIndex:\"+c);return\"Threshold\"===b?this.constants.PREFETCHED_PAGES:\"Preload\"===b?1:Math.min(Math.max(c,1),this.constants.PREFETCHED_PAGES)},_getPageSize:function(a,b,c){var d=a.get(\"v.pageSizeGetter\");if(null!=d&&\"function\"===\ntypeof d.get)return d.get(b,c);d=a.get(\"v.nextPageSize\");a=a.get(\"v.firstPageSize\")||d;$A.log(\"FeedInner.helper#getPageSize - eventName:\"+b+\"; pageIndex:\"+c);return\"Reload\"===b?a:\"Refresh\"===b?a:\"LoadMore\"===b?d:\"Load\"===b?a:\"Preload\"===b?0:d},handleEvent:function(a,b){if(a.isValid()&&a.getElement()){var c=b.getDef().getDescriptor(),c=\"handle_{1}_{2}\".replace(\"{1}\",c.getNamespace()).replace(\"{2}\",c.getName());$A.util.isFunction(this[c])&&(this[c](a,b),this._destroyFeedPreloader(a))}},handle_forceChatter_postCreated:function(a,\nb){var c=b.getParam(\"feedItem\"),d=b.getParam(\"feedItemId\"),e=b.getParam(\"contextId\"),f=b.getParam(\"isDraftBeingPublished\"),k=a.get(\"v.config.subjectId\"),h=$A.util.lookup(c,\"actor\",\"id\"),l=$A.util.lookup(c,\"capabilities\",\"status\",\"feedEntityStatus\")===this.feedLib.util.feedEntityStatus.Draft,e=e?e.substring(0,15):null,k=k?k.substring(0,15):null,h=h?h.substring(0,15):null;if((d||c)&&e===k||h===k)if(e=a.getElement(),e=this.feedLib.util.closestMatch(e,\".oneContent\"),!e||this.feedLib.util.matches(e,\".active\"))if(this.canInsertIntoFeed(a,\nl)){var g=this,m=function(b){var c={};$A.util.apply(c,b,!0,!0);c.commentSubscribeOnRender=!0;g.insertFeedItems(a,[c],!0)};c?m(c):(f=a.get(\"c.refreshFeed\"),f.setParams({config:a.get(\"v.config\"),pageSize:4}),f.setCallback(this,function(b){\"SUCCESS\"===b.getState()&&b.getReturnValue()?(b=b.getReturnValue().data.elements.filter(function(a){return a.id===d}))&&1===b.length&&m(b[0]):g.refreshFeed(a)}),$A.enqueueAction(f))}else(c=a.get(\"v.sharedId\"))||(c=a.getGlobalId()),this.methodEmitter.service.emit(\"requestFeedSwitch\",\n[\"News\"],c),f&&$A.getEvt(\"force:showToast\").setParams({message:$A.get(\"$Label.Feeds.DraftPublishedConfirmation\"),isClosable:!0,type:\"success\"}).fire()},handle_forceChatter_feedItemDeleted:function(a,b){var c=b.getParam(\"feedItemId\");this.removeFeedItem(a,c)},handle_forceChatter_feedItemUpdated:function(a,b){var c=b.getParam(\"data\");this.updateFeedItem(a,c)},loadMore:function(a,b,c){b=b||{isPreloading:!1};var d=this.getContext(a);if(d.isLoading)d.isPreloading&&$A.util.isFunction(c)&&(d.interceptedScrollCallback=\nc);else{this.metricsReporter.service.transactionStart(\"feeds\",\"feedRerendered\",{context:{operation:\"loadMore\"}});var e=$A.getCallback(function(){$A.util.isFunction(c)&&c.apply(this,arguments)}),f=a.get(\"v.feedElementCollection\")||{};if(Array.isArray(f.immediateNextElements)&&0<f.immediateNextElements.length&&(f=$A.util.apply({},f),f.elements=[].concat(f.immediateNextElements),f.immediateNextElements.length=0,this.updateData(a,f,!0),!b.isPreloading)){e();return}this._destroyFeedPreloader(a);if(a.get(\"v.feedElementCollection.nextPageToken\")){var k=\nthis.getFetchId(a);this.prefetcherLib.prefetcher.fetchNextPage(a,function(c){var f;if(\"SUCCESS\"===c.getState()&&c.getReturnValue()){d.isLoading=!1;var g={operation:\"loadMore\",subject:a.get(\"v.config.type\")};a.get(\"v.config.subjectId\")&&(g.recordId=\"005\"===a.get(\"v.config.subjectId\").substring(0,3)?\"user\":a.get(\"v.config.subjectId\"));this.metricsReporter.service.transactionStart(\"ltng\",\"feed:component:createMore\",{context:g});if(!a||!a.isValid()||k!==this.getFetchId(a))return;c=c.getReturnValue();\n$A.util.isUndefinedOrNull(c.data.searchQueryId)||(g=a.get(\"v.allSearchQueryIds\"),g.push(c.data.searchQueryId),a.set(\"v.allSearchQueryIds\",g));if(!b.isPreloading&&!a.get(\"v.requireScroller\")){var g=a.find(\"scroller\"),m=!0;g&&(m=g.get(\"v.enableLoadMoreButton\"));m&&$A.util.lookup(c,\"data\",\"elements\",0)&&(c.data.elements[0].refocus=!0)}g=this.feedLib.util.getAllFeedItemIDs(c.data.elements);m=g.toString();$A.util.isEmpty(a.get(\"v.previousFeedItemIds\"))&&a.set(\"v.previousFeedItemIds\",this.feedLib.util.getAllFeedItemIDs(a.get(\"v.feedElementCollection.elements\")).toString());\nm=m+\",\"+a.get(\"v.previousFeedItemIds\");a.set(\"v.previousFeedItemIds\",g.toString());this.updateData(a,c.data,!0);c={operation:\"feedLoadMore\",feedItemIds:m,sortOrder:a.get(\"v.config.sortOrder\"),feedType:a.get(\"v.config.type\"),startFeedItemPosition:this.getFeedItemIndex(a,g[0]),searchQueryId:$A.util.lookup(c,\"data\",\"elements\",0,\"searchQueryId\")};a.get(\"v.config.subjectId\")&&(c.subjectId=\"005\"===a.get(\"v.config.subjectId\").substring(0,3)?\"user\":a.get(\"v.config.subjectId\"));this.feedLib.util.logFeedOperations(c,\n\"loadMore\")}else\"INCOMPLETE\"===c.getState()?f={labelError:$A.get(\"$Label.Offline.NoConnectionDescription\")}:this.feedLib.util.fireActionErrorMessage(c);d.isPreloading&&(d.isPreloading=!1,c=d.interceptedScrollCallback,null!=c&&(e=c,d.interceptedScrollCallback=null));f?e(f):e();this._fireForceScrollerReflow(a)},this,{isPreloading:b.isPreloading})?(d.isLoading=!0,d.isPreloading=b.isPreloading,this.log({itemToLog:\"loadMoreFeedItems\",type:a.get(\"v.config.type\")},!0)):e()}else e()}},updateConfig:function(a,\nb){a.set(\"v.config\",b)},getFeedItemIndex:function(a,b){var c=a.get(\"v.feedElementCollection.elements\"),d=null;if(!c)return null;for(var e=0;e<c.length;e++)if(c[e].id===b){d=e;break}$A.util.isFiniteNumber(d)&&(d=d++);return d},updateData:function(a,b,c){var d=this.getContext(a);a.set(\"v.feedElementCollection.nextPageToken\",b.nextPageToken);d.logRerender=!0;this.metricsReporter.service.markStart(\"feeds\",\"feedUpdateData\");if(c)this.insertFeedItems(a,b.elements),this.findUnreadItemIds(a,a.helper,b.elements);\nelse{a.set(\"v.feedElementCollection.elements\",b.elements);a.set(\"v.feedElementCollection.currentPageToken\",b.currentPageToken);a.set(\"v.feedElementCollection.isModifiedToken\",b.isModifiedToken);a.set(\"v.feedElementCollection.searchQueryId\",b.searchQueryId);this.findUnreadItemIds(a,a.helper,b.elements,!0);this.fetchAndFireSetLinkMetadataEvent(a,b.elements);c=this._getPageSize.bind(this,a);var e=this._getPageCount.bind(this,a);this.prefetcherLib.prefetcher.resetAndConfigurePrefetcher(a,a.get(\"v.feedElementCollection.nextPageToken\"),\nc,e)}window.setTimeout($A.getCallback(function(){d.unreadItems&&d.unreadItems.length&&a.helper.markAsRead(a,null,a.helper)}),0);this.metricsReporter.service.markEnd(\"feeds\",\"feedUpdateData\");$A.util.isEmpty(b.nextPageToken)&&(b=a.getEvent(\"noMoreContent\"))&&b.fire()},updatePinnedData:function(a,b){var c=b.elements;$A.util.isEmpty(c)||(c.forEach(function(a){a.capabilities.pin.isPinnedCopy=!0}),a.set(\"v.hasPinnedFeedItems\",!0));a.set(\"v.pinnedFeedElementCollection.elements\",c)},updateIsFeedModified:function(a,\nb){a.set(\"v.isFeedModified\",b)},setIsFeedRefreshing:function(a,b){a.set(\"v.isFeedRefreshing\",b);var c=a.find(\"scroller\");c&&c.helper.refreshScroller(c,b);b?a.helper.realtimeUnsubscribe(a):a.helper.realtimeSubscribe(a)},updateFeed:function(a,b){b&&(this.updateConfig(a,b.config),this.updateData(a,b.data),this.updateIsFeedModified(a,!1),this.updateEmptyFeedMessage(a,b.emptyFeedMessage),$A.util.isUndefinedOrNull(b.pinnedFeedData)||this.updatePinnedData(a,b.pinnedFeedData))},insertFeedItems:function(a,\nb,c){if($A.util.isArray(b)){var d=this.getContext(a),e=a.get(\"v.feedElementCollection.elements\"),f=c&&$A.get(\"$Browser.isDesktop\");c?(f&&b.filter(function(a){a.transitionClass=\"initial\"}),e=b.concat(e)):e=e.concat(b);if(f){var k=function(){if(a.isValid()){var c=a.get(\"v.feedElementCollection\");if((e=c&&c.elements)&&e.length){var f=(c=a.find(\"cuf-feed\").getElement())&&c.children,c=[];if(f){var g;for(g=0;g<f.length;++g)0<=f[g].className.indexOf(\"cuf-feedElementIterationItem\")&&c.push(f[g]);if(e.length===\nc.length){f=!1;for(g=0;g<e.length;g++){var m=e[g];\"initial\"===m.transitionClass&&(window.getComputedStyle(c[g]).opacity,m.transitionClass=\"initial expanding\",f=!0)}if(f&&(a.set(\"v.feedElementCollection.elements\",e),window.setTimeout($A.getCallback(function(){if(a.isValid()){var b=a.get(\"v.feedElementCollection\").elements;if(b){for(g=0;g<b.length;g++)b[g].transitionClass=\"\";a.set(\"v.feedElementCollection.elements\",b)}}}),2E3),a.helper.feedLib.util.updateTimestamp(a),a.get(\"v.config.isFeedUIExperimentsEnabled\")&&\nb[0].isLivePost)){var n=a.find(\"cuf-feed\").getElement().querySelector(\".cuf-element\");n.className+=\" highlighted\";window.setTimeout($A.getCallback(function(){var a=n.className.split(\" \");a.pop();n.className=a.join(\" \")}),2E3)}(c=a.find(\"cuf-feed\")&&a.find(\"cuf-feed\").getElement())&&c.removeEventListener(\"DOMSubtreeModified\",k);d.addItemRegistered=!1}}}}};d.addItemRegistered||(c=a.find(\"cuf-feed\")&&a.find(\"cuf-feed\").getElement())&&c.addEventListener(\"DOMSubtreeModified\",k)}a.set(\"v.feedElementCollection.elements\",\ne);this.fetchAndFireSetLinkMetadataEvent(a,b)}},removeFeedItem:function(a,b){var c=a.get(\"v.feedElementCollection.elements\"),d=a.get(\"v.pinnedFeedElementCollection\");if(c){var e;for(e=0;e<c.length;e++)if(c[e].id===b){c.splice(e,1);break}a.set(\"v.feedElementCollection.elements\",c);if(d){c=a.get(\"v.pinnedFeedElementCollection.elements\");for(e=0;e<c.length;e++)if(c[e].id===b){c.splice(e,1);break}0===c.length&&(a.set(\"v._showPinnedPostsHeader\",!1),a.set(\"v.hasPinnedFeedItems\",!1));a.set(\"v.pinnedFeedElementCollection.elements\",\nc)}}},updateFeedItem:function(a,b){var c=b.id,d=a.get(\"v.feedElementCollection.elements\"),e=a.get(\"v.pinnedFeedElementCollection.elements\");if(d){var f;for(f=0;f<d.length;f++){var k=d[f];if(k.id===c){b.capabilities.pin=$A.util.lookup(k,\"capabilities\",\"pin\");d[f]=b;break}}if(e){for(f=0;f<e.length;f++)if(e[f].id===c){c=$A.util.lookup(e[f],\"capabilities\",\"pin\",\"isPinnedCopy\");b.capabilities.pin=$A.util.lookup(e[f],\"capabilities\",\"pin\");b.capabilities.pin.isPinnedCopy=!1;c&&(c={},$A.util.apply(c,b,!0,\n!0),c.capabilities.pin.isPinnedCopy=!0,e[f]=c);break}a.set(\"v.pinnedFeedElementCollection.elements\",e)}a.set(\"v.feedElementCollection.elements\",d);this.fetchAndFireSetLinkMetadataEvent(a,[b])}},updateEmptyFeedMessage:function(a,b){null!==b&&a.set(\"v.emptyFeedMessage\",b)},canInsertIntoFeed:function(a,b){var c=a.get(\"v.config\");return(c=c?c.type:null)&&(\"bookmarks\"===c.toLowerCase()||\"to\"===c.toLowerCase()||\"draft\"===c.toLowerCase()&&!b)?!1:!0},realtimeEnabledForThisFeed:function(a){if(!this.realtime.service.isEnabled())return!1;\nvar b=a.get(\"v.config.subjectId\");return!b||0!==b.indexOf(\"0F9\")||a.get(\"v.config.feedDisplayConfig.searching\")?!1:!0},realtimeUnsubscribe:function(a){this.realtimeEnabledForThisFeed(a)&&(a.set(\"v.numQueuedItems\",0),a.helper.realtime.service.unsubscribe(a.getGlobalId()))},realtimeSubscribe:function(a){if(this.realtimeEnabledForThisFeed(a)){var b=a.get(\"v.config.subjectId\");a.set(\"v.numQueuedItems\",0);var c=function(b,c,d){var e=!0,g=a.get(\"v.feedElementCollection.elements\");g&&g.forEach(function(a){a.id===\nb.id&&(e=!1)});e&&(a.get(\"v.config.isFeedUIExperimentsEnabled\")?(b.isLivePost=!0,a.helper.insertFeedItems(a,[b],!0)):(g=a.getGlobalId(),a.helper.realtime.service.addToQueue(g,b),a.helper.displayLiveFeedPill(a,c+1,d)))},d=a.helper.pageLoadCoordination.service.waitForPageLoad(),e=new Promise(function(d,e){a.helper.realtime.service.subscribeFeed(b,a.getGlobalId(),$A.getCallback(c),d)});Promise.all([d,e]).then($A.getCallback(function(){a.isValid()&&a.helper.getLatestFeedData(a)}))}},getLatestFeedData:function(a){this._destroyFeedPreloader(a);\nvar b=a.helper.realtime.service.MAX_QUEUED_ITEMS,c=a.getGlobalId(),d=a.get(\"c.refreshFeed\");d.setParams({config:a.get(\"v.config\"),pageSize:b});d.setCallback(this,function(b){if(\"SUCCESS\"===b.getState()&&b.getReturnValue()){b=b.getReturnValue().data.elements;for(var d=b.map(function(a){return a.id}),k=a.get(\"v.feedElementCollection.elements\").map(function(a){return a.id}),d=d.indexOf(k[0]),h=0;h<d;h++)0>k.indexOf(b[h].id)&&a.helper.realtime.service.addToQueue(c,b[h]);b=a.helper.realtime.service.getQueueLength(c);\nk=a.helper.realtime.service.getRefreshRequired(c);0<b&&this.displayLiveFeedPill(a,b,k)}else\"INCOMPLETE\"===b.getState()?$A.getEvt(\"markup://force:showOfflineMessage\").setParams({retryAction:b}).fire():this.feedLib.util.fireActionErrorMessage(b)});$A.enqueueAction(d)},displayLiveFeedPill:function(a,b,c){var d=1===b?$A.get(\"$Label.Feeds.SingleNewPosts\"):$A.get(\"$Label.Feeds.PluralNewPosts\");a.set(\"v.numQueuedItems\",b);c&&(a.set(\"v.realtimeRefreshRequired\",!0),b+=\"+\");a.getEvent(\"feedNotification\").setParams({type:\"SHOW\",\nlabel:$A.util.format(d,b),target:a,action:\"c.updateQueuedItems\"}).fire()},reloadFeed:function(a,b,c,d){this._destroyFeedPreloader(a);a.set(\"v.previousFeedItemIds\",\"\");this.hideFeed(a,!0);this.setIsFeedRefreshing(a,!0);var e=a.get(b);c.config=a.get(\"v.config\");c.pageSize=this._getPageSize(a,\"Reload\",0);e.setParams(c);var f=this.setFetchId(a);e.setCallback(this,function(c){var e=this.getFetchId(a);f===e&&(\"SUCCESS\"===c.getState()&&c.getReturnValue()?(this.updateFeed(a,c.getReturnValue()),e=a.getEvent(\"feedReloaded\"),\ne.setParam(\"data\",c.getReturnValue()),e.fire(),$A.util.isFunction(d)&&d(a)):\"INCOMPLETE\"===c.getState()?$A.getEvt(\"markup://force:showOfflineMessage\").setParams({retryAction:c}).fire():this.feedLib.util.fireActionErrorMessage(c),this.hideFeed(a),this.setIsFeedRefreshing(a),e=this.feedLib.util.getAllFeedItemIDs($A.util.lookup(c.getReturnValue(),\"data\",\"elements\")),e={operation:b,feedItemIds:e.toString(),sortOrder:a.get(\"v.config.sortOrder\"),feedType:a.get(\"v.config.type\"),startFeedItemPosition:!$A.util.isEmpty(e)?\nthis.getFeedItemIndex(a,e[0]):null,searchQueryId:$A.util.lookup(c.getReturnValue(),\"data\",\"searchQueryId\")},a.get(\"v.config.subjectId\")&&(e.subjectId=\"005\"===a.get(\"v.config.subjectId\").substring(0,3)?\"user\":a.get(\"v.config.subjectId\")),$A.util.isUndefinedOrNull($A.util.lookup(c.getReturnValue(),\"data\",\"searchQueryId\"))||a.set(\"v.allSearchQueryIds\",[c.getReturnValue().data.searchQueryId]),this.feedLib.util.logFeedOperations(e,b))});$A.enqueueAction(e)},switchFeedType:function(a,b){var c=b.type,d=\na.get(\"v.config.type\");if(c!==d||a.get(\"v.isFeedRefreshing\"))this.metricsReporter.service.transactionStart(\"ltng\",\"feedRerendered\",{context:{newFeedType:c,operation:\"switch\"}}),a.get(\"v.sharedId\")||a.getGlobalId(),\"Company\"===c&&this.feedLib.util.isOneApp()&&this.feedLib.util.isDesktop()&&a.get(\"v.config.isCompanyRelevanceFeedEnabled\")?(\"Relevance\"!==a.get(\"v.config.sortOrder\")&&a.set(\"v.preservedSortOrder\",a.get(\"v.config.sortOrder\")),a.set(\"v.config.sortOrder\",\"Relevance\")):\"Relevance\"===a.get(\"v.config.sortOrder\")&&\na.set(\"v.config.sortOrder\",a.get(\"v.preservedSortOrder\")),a.get(\"v.feedType\")!==c&&a.set(\"v.feedType\",c),this.reloadFeed(a,\"c.serverSwitchFeedType\",{feedType:c})},sort:function(a,b,c){a.set(\"v.preservedSortOrder\",b);this.metricsReporter.service.transactionStart(\"ltng\",\"feedRerendered\",{context:{sortBy:b,operation:\"sort\"}});this.reloadFeed(a,\"c.serverSortFeed\",{sortBy:b},c)},filter:function(a,b,c){this.metricsReporter.service.transactionStart(\"ltng\",\"feedRerendered\",{context:{filterBy:b,operation:\"filter\"}});\nvar d=a.get(\"v.feedType\").toLowerCase();c?this.storage.filters.setDensityDefault(d,c):b?this.storage.filters.setFilterDefault(d,b):this.storage.filters.setFilterDefault(d,\"AllUpdates\");this.reloadFeed(a,\"c.serverFilterFeed\",{filterBy:b,density:c})},filterByCustomFilter:function(a,b){this.reloadFeed(a,\"c.serverCustomFilterFeed\",{filterName:b})},setFetchId:function(a){a=this.getContext(a);a.fetchId=(a.fetchId||0)+1;return a.fetchId},getFetchId:function(a){a=this.getContext(a);a.fetchId=a.fetchId||0;\nreturn a.fetchId},refreshFeed:function(a,b){a.set(\"v.previousFeedItemIds\",\"\");var c=a.get(\"v.onRefreshStart\");c&&c.run();this.hideFeed(a,!0);this.setIsFeedRefreshing(a,!0);var c=a.get(\"c.refreshFeed\"),d=this._getPageSize(a,\"Refresh\",0);c.setParams({config:a.get(\"v.config\"),pageSize:d});var e=this.setFetchId(a);c.setCallback(this,function(c){var d=this.getFetchId(a);if(e===d){var h;if(\"SUCCESS\"===c.getState()&&c.getReturnValue()){d=c.getReturnValue();if(!$A.util.isUndefinedOrNull($A.util.lookup(d,\n\"data\",\"searchQueryId\"))&&!$A.util.isUndefinedOrNull($A.util.lookup(d,\"data\",\"elements\"))){for(var l=0;l<d.data.elements.length;l++)d.data.elements[l].searchQueryId=d.data.searchQueryId;a.set(\"v.allSearchQueryIds\",[d.data.searchQueryId])}this.updateFeed(a,d);l=a.getEvent(\"feedRefreshed\");l.setParam(\"data\",d);l.fire();var l=$A.util.lookup(d,\"config\",\"feedDisplayConfig\",\"contextUser\"),g=$A.util.lookup(a.get(\"v.config\"),\"feedDisplayConfig\",\"contextUser\",\"photo\",\"smallPhotoUrl\");$A.util.lookup(l,\"photo\",\n\"smallPhotoUrl\")===g&&(g=$A.getEvt(\"markup://forceChatter:feedContextUserUpdated\"),g.setParams({feedContextUser:l}),g.fire());c=this.feedLib.util.getAllFeedItemIDs($A.util.lookup(c.getReturnValue(),\"data\",\"elements\"));c={operation:\"feedRefresh\",feedItemIds:c.toString(),sortOrder:a.get(\"v.config.sortOrder\"),feedType:a.get(\"v.config.type\"),startFeedItemPosition:!$A.util.isEmpty(c)?this.getFeedItemIndex(a,c[0]):null,searchQueryId:$A.util.lookup(d,\"data\",\"searchQueryId\")};a.get(\"v.config.subjectId\")&&\n(c.subjectId=\"005\"===a.get(\"v.config.subjectId\").substring(0,3)?\"user\":a.get(\"v.config.subjectId\"));this.feedLib.util.logFeedOperations(c,\"feedRefresh\")}else\"INCOMPLETE\"===c.getState()?h={labelError:$A.get(\"$Label.Offline.NoConnectionDescription\")}:this.feedLib.util.fireActionErrorMessage(c);this.hideFeed(a);this.setIsFeedRefreshing(a);$A.util.isFunction(b)&&(h?b(h):b())}});$A.enqueueAction(c);this.log({itemToLog:\"refreshFeed\",type:a.get(\"v.config.type\")},!0)},checkNewContent:function(a){if(!a.get(\"v.isFeedModified\")){var b=\na.get(\"c.isFeedModified\");b.setParams({config:a.get(\"v.config\"),isModifiedToken:a.get(\"v.feedElementCollection.isModifiedToken\")});b.setCallback(this,function(b){\"SUCCESS\"===b.getState()&&this.updateIsFeedModified(a,b.getReturnValue())});$A.run(function(){$A.enqueueAction(b)})}},hideFeed:function(a,b){var c=a.find(\"cuf-feed\").getElement(),d;a.find(\"cuf-pinnedFeed\")&&(d=a.find(\"cuf-pinnedFeed\").getElement());c&&(b?($A.util.addClass(c,\"invisibleEl\"),d&&($A.util.addClass(d,\"invisibleEl\"),a.set(\"v.hasPinnedFeedItems\",\n!1))):($A.util.removeClass(c,\"invisibleEl\"),d&&$A.util.removeClass(d,\"invisibleEl\")),this.cmpLib.placeholders.insertDelayed(a,function(){return b},a.find(\"feedPlaceholder\"),[\"feed\"]))},log:function(a,b){},fetchAndFireSetLinkMetadataEvent:function(a,b){$A.util.isEmpty(b)||a.find(\"richLinkPreviewMetadata\").getEvent(\"getEmbedlyData\").setParams({callback:function(a){if(!$A.util.isUndefinedOrNull(a)){var b=$A.getEvt(\"markup://forceChatter:setLinkMetadata\");b&&(b.setParams({richLinkData:a}),b.fire())}},\nfeedElements:b}).fire()},search:function(a,b){b&&b.trim&&(b=b.trim());if(\"\"<b){this.log({itemToLog:\"feedSearch\"});this.metricsReporter.service.transactionStart(\"ltng\",\"feedRerendered\",{context:{operation:\"search\"}});var c=a.get(\"v.config\");a.set(\"v.config.feedDisplayConfig.searching\",!0);c.searchQuery=b;this.updateConfig(a,c);this.refreshFeed(a)}},cancelSearch:function(a,b){var c=a.get(\"v.config\");\"\"<c.searchQuery&&(this.metricsReporter.service.transactionStart(\"ltng\",\"feedRerendered\",{context:{operation:\"cancelSearch\"}}),\nc.searchQuery=null,a.set(\"v.config.feedDisplayConfig.searching\",!1),this.updateConfig(a,c),this.refreshFeed(a,b))},scrollTo:function(a,b){if(a&&a.isValid())if(a.get(\"v.requireScroller\")){var c=a.find(\"scroller\");c&&c.getEvent(\"scrollTo\").setParams({destination:b}).fire()}else if(\"top\"===b){for(var d=a.getElement().parentNode,c=0;d;)c+=d.offsetTop,d=d.offsetParent;(d=document.getElementById(\"oneHeader\"))&&(c-=d.offsetHeight);window.scroll(0,c)}},usageInfoBuilder:function(a,b,c){return{action:b,target:c,\ntype:a.get(\"v.config.feedDisplayConfig.searching\")?\"Search\":\"Normal\"}},liveTimestamps:function(a,b){clearInterval(a.liveTimestampInterval);a.liveTimestampInterval=setInterval($A.getCallback(function(){b.feedLib.util.updateTimestamp(a)}),6E4)},_fireForceScrollerReflow:function(a){window.setTimeout(function(){document.dispatchEvent(this._newCustomEvent(\"FORCEREFLOW\"))}.bind(this),0)},_newCustomEvent:function(a,b){if(\"function\"===typeof window.CustomEvent)return new CustomEvent(a);b=b||{bubbles:!1,cancelable:!1,\ndetail:void 0};var c=document.createEvent(\"CustomEvent\");c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail);return c},markAsRead:function(a,b,c){b=a.getElement();var d=this.getContext(a);if(a.isValid()&&b&&d.unreadItems){for(var e=d.unreadItems.slice(0),f=[],k=0;k<d.unreadItems.length;k++){var h=b.querySelector('.cuf-feedElement[data-id\\x3d\"{0}\"]'.replace(\"{0}\",d.unreadItems[k]));if(h&&(c.feedLib.util.isElementVisible(h)||0>=h.getBoundingClientRect().bottom)){var l=d.unreadItems[k];e.splice(e.indexOf(l),\n1);f.push(l);h.dataset.isReadByMe=!0}}c._enqueueMarkAsReadAction(a,c,f);d.unreadItems=e}},_enqueueMarkAsReadAction:function(a,b,c){if(c&&0<c.length){var d={isReadByMe:!0};d.feedItemIds=c;d.communityId=a.get(\"v.config.communityId.rawValue\");this._requestLazyWork(a,$A.getCallback(function(){b.feedLib.util.standardActionWithRetry(this,a,\"c.markAsReadBatch\",d,null,null,$A.getCallback(function(a){a.setBackground(!0)}))}),{viewportVisibility:!1})}},findUnreadItemIds:function(a,b,c,d){a=this.getContext(a);\na.unreadItems||(a.unreadItems=[]);c&&(c=c.filter(function(a){return a.capabilities.readBy&&!1===a.capabilities.readBy.isReadByMe}).map(function(a){return a.id}),a.unreadItems=d?c:a.unreadItems.concat(c))},_createSingleEventEmitter:function(){function a(){b=[]}var b=[];return{emit:function(a,d,e){b.forEach(function(b){b(a,d,e)})},notify:function(){b.forEach(function(a){a()})},addListener:function(a){b.push(a)},removeListener:function(a){b=b.filter(function(b){return b!==a})},removeListeners:a,destroy:function(){a()}}},\ngetContext:function(a){return a._context},_requestLazyWork:function(a,b,c){function d(){n&&n();for(var a in h)if(h[a].unregisterWork===d){h.splice(Number(a),1);break}}function e(){var a=p.map(function(a){return a()}),f=a.map(function(a){return a.completed}),f=Promise.race(f);f.then(function(){a.forEach(function(a){a.unregister()})});f.then(function(a){\"Cancelled\"!==a&&b(a)});c.viewportVisibility&&h.push({completed:f,registerWork:e,unregisterWork:d});return!0}c=c||{viewportVisibility:!0};var f=this.getContext(a),\nk=this;if(null==f.registeredWork){var h=f.registeredWork=[],l=$A.getEvt(\"markup://ui:notify\",\"content\",a);if(null!=l){var g=$A.getCallback(function(){if(a.isValid())for(var b in h)h[b].registerWork()}.bind(this)),m=$A.getCallback(function(){a.isValid()&&h.filter(function(a){return a.unregisterWork}).forEach(function(a){a.unregisterWork()})}).bind(this),g=f.contentNotifyPayload={viewportEnter:g,viewportExit:m};l.setParams({payload:g});l.fire()}}var n,p=[function(){function a(){b.removeListener(c)}\nvar b=f.scrollEmitter,c;return{completed:(new Promise(function(a,d){c=a;b.addListener(c)})).then(a).then(function(){return\"UserScroll\"}),unregister:a}},function(){return{completed:k.pageLoadCoordination.service.waitForPageLoad().then(function(){return\"PageLoaded\"}),unregister:function(){}}},function(){return{completed:(new Promise(function(a,b){n=a})).then(function(){return\"Cancelled\"}),unregister:function(){}}}],h=f.registeredWork;e();return d},_cancelAllLazyWork:function(a,b){var c=this.getContext(a);\nif(null!=c.registeredWork){var d=c.registeredWork;d.filter(function(a){return a.unregisterWork}).forEach(function(a){a.unregisterWork()});d.length=0}null!=c.contentNotifyPayload&&(d=c.contentNotifyPayload,d.viewportEnter=null,d.viewportExit=null,c.contentNotifyPayload=null)},_destroyFeedPreloader:function(a){a=this.getContext(a);null!=a.unregisterPreloader&&(a.unregisterPreloader(),a.unregisterPreloader=null)},_initFeedPreloader:function(a){var b=this,c=function(){},d=this.getContext(a),e=this._requestLazyWork(a,\n$A.getCallback(function(d){$A.log(\"FeedInner.helper#_initFeedPreloader - preload via. \"+d);b.loadMore(a,{isPreloading:!0},c)}));d.unregisterPreloader=e}},renderer:{render:function(a,b){(new Date).getTime();b.metricsReporter.service.markStart(\"feeds\",\"feedRenderTime\");b.metricsReporter.service.transactionStart(\"ltng\",\"feed:component:render\");return a.superRender()},rerender:function(a,b){b.metricsReporter.service.markStart(\"feeds\",\"feedRe-RenderTime\");a.superRerender();var c=b.getContext(a),d=b.usageInfoBuilder(a,\n\"Reload\",\"forceChatter:feed:init\");c.logRerender&&(b.metricsReporter.service.transactionEnd(\"feeds\",\"feedRerendered\",null,d),b.metricsReporter.service.transactionEnd(\"ltng\",\"feed:component:createMore\",null,d),delete c.logRerender);b.metricsReporter.service.markEnd(\"feeds\",\"feedRe-RenderTime\",null,d)},afterRender:function(a,b){var c=a.superAfterRender(),d=a.getElement();if(d){650<=d.getBoundingClientRect().width?$A.util.addClass(d,\"cuf-wide-feed\"):$A.util.removeClass(d,\"cuf-wide-feed\");var e=a.get(\"v.sharedId\")?\na.get(\"v.sharedId\"):a.getGlobalId();a.getElement().setAttribute(\"id\",e);d.addEventListener(\"changesortselection\",$A.getCallback(function(c){c.stopPropagation();b.sort(a,c.detail.value)}));d.addEventListener(\"changefilterselection\",$A.getCallback(function(c){c.stopPropagation();b.filter(a,c.detail.filterBy,c.detail.density)}))}d=b.usageInfoBuilder(a,\"Load\",\"forceChatter:feed:init\");b.metricsReporter.service.markEnd(\"feeds\",\"feedRenderTime\");b.metricsReporter.service.transactionEnd(\"feeds\",\"feedLoaded\");\nd.action=\"PageView\";b.metricsReporter.service.transactionEnd(\"ltng\",\"feed:component:render\",null,d);b.metricsReporter.service.transactionEnd(\"ltng\",\"feed:centerStage\",null,d);b.metricsReporter.service.transactionEnd(\"ltng\",\"feedPage\",null,d);$A.get(\"$Browser.isDesktop\")&&b.liveTimestamps(a,b);d=a.get(\"v.pageSizeGetter\");null!=d&&\"function\"===typeof d.get&&b._initFeedPreloader(a);a.getEvent(\"feedRendered\").fire();return c}}}});","uuid":null}"createdN À÷ÿ4zvB"expiresN À±Û5zvB"valueEncodedF{"sizeIÃ"expiresN À±Û5zvB{