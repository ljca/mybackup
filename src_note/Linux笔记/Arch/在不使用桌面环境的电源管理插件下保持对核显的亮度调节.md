#  在不使用桌面环境的电源管理插件下保持对核显的亮度调节
﻿&nbsp;&nbsp;假如没你并不希望使用桌面环境的笔记本亮度调节，而同时又希望保持对核显的亮度调节的话。

&nbsp;&nbsp;然而，即便没有安装核显的驱动包，内核也直接提供了相应的通用模块。在我的计算机上，核显使用的是`i915`模块(这可以通过`lspci -kv`来查看)。假如你同时在`/sys`文件系统下找到了由内核中的驱动提供的接口文件，那么就可以通过它直接调节核显亮度。不幸的是：这只会对会当前用户会话生效。而如果你希望对核显亮度的调节能在重启系统后同样保持，那么你可能需要在调节亮度之后将`X`服务器杀死一次才能在重新引导系统之后保持之前对核显调整好的亮度。

```
.............
00:02.0 VGA compatible controller: Intel Corporation Broadwell-U Integrated Graphics (rev 09) (prog-if 00 [VGA controller])
	Subsystem: Acer Incorporated [ALI] Device 0940
	Flags: bus master, fast devsel, latency 0, IRQ 51
	Memory at c2000000 (64-bit, non-prefetchable) [size=16M]
	Memory at d0000000 (64-bit, prefetchable) [size=256M]
	I/O ports at 5000 [size=64]
	Expansion ROM at <unassigned> [disabled]
	Capabilities: <access denied>
	Kernel driver in use: i915
	Kernel modules: i915
............
```

```Bash
# 以根用户权限杀死 X 服务器
pkill X
```


```Bash
# 用于直接调节亮度的函数，通过直接操作由内核驱动提供的底层接口文件。虽然我知道有个 sl 的程序是用来在终端上跑火车的……
# 仅对 bash 生效……
function sl () 
{ 
  local tmp=/sys/class/backlight/intel_backlight/brightness;
  if [ -r $tmp ]; then
    if [ $# -eq 1 ]; then
      echo $1 | ${SUDO} tee $tmp > /dev/null;
    else
      echo "light:`cat $tmp`";
  fi;
  else
    echo "Intel video card driver maied not loading....";
  fi;
  unset tmp
}
```

